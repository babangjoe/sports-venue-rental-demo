-- Create Roles table
create table roles (
  id bigint primary key generated by default as identity,
  role_name text not null,
  description text,
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);

-- Create Users table
create table users (
  id bigint primary key generated by default as identity,
  username text unique not null,
  email text unique not null,
  password_hash text not null,
  role_id bigint references roles(id),
  full_name text,
  is_active integer default 1,
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);

-- Create Sports table
create table sports (
  id bigint primary key generated by default as identity,
  sport_name text not null,
  sport_type text not null,
  description text,
  is_available integer default 1,
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);

-- Create Fields table
create table fields (
  id bigint primary key generated by default as identity,
  field_name text not null,
  field_code text not null,
  sport_id bigint references sports(id),
  price_per_hour numeric not null,
  description text,
  is_available integer default 1,
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);

-- Create Bookings table
create table bookings (
  id bigint primary key generated by default as identity,
  field_id bigint references fields(id),
  field_name text,
  booking_date text not null, -- Keeping as text to match YYYY-MM-DD format easily or use date type
  time_slots jsonb not null,
  total_price numeric not null,
  customer_name text,
  customer_phone text,
  customer_email text,
  booking_status text default 'pending',
  payment_status text default 'pending',
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);

-- Insert Roles Data
INSERT INTO roles (id, role_name, description, created_at, updated_at) VALUES
(1, 'admin', 'Can access admin menu except Dashboard', '2025-11-16T14:31:39.000Z', '2025-11-16T14:31:39.000Z'),
(2, 'owner', 'Can access all admin menus including Dashboard', '2025-11-16T14:31:39.000Z', '2025-11-16T14:31:39.000Z');

-- Reset sequence for roles
ALTER TABLE roles ALTER COLUMN id RESTART WITH 3;

-- Insert Users Data
INSERT INTO users (id, username, email, password_hash, role_id, full_name, is_active, created_at, updated_at) VALUES
(1, 'admin', 'admin@sportarena.com', '$2b$10$fTHANeq8SFVDKY4P6cUomepp8ujoDIXXuEuAZYcYRd7FVdn3CsEDG', 1, 'Administrator Admin', 1, '2025-11-16T14:31:39.000Z', '2025-11-16T14:31:39.000Z'),
(2, 'owner', 'owner@sportarena.com', '$2b$10$0D4mWpHoHJ.rlzV/yNYKceUnK5LklzXgrVVNcSY3zL8DiR415lk2S', 2, 'System Owner', 1, '2025-11-16T14:31:39.000Z', '2025-11-16T14:31:39.000Z');

-- Reset sequence for users
ALTER TABLE users ALTER COLUMN id RESTART WITH 3;

-- Insert Sports Data
INSERT INTO sports (id, sport_name, sport_type, description, is_available, created_at, updated_at) VALUES
(1, 'Futsal', 'futsal', 'Indoor soccer with 5 players per team', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:34:26.000Z'),
(2, 'Mini Soccer', 'mini-soccer', 'Small-sided soccer game', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:34:26.000Z'),
(3, 'Basketball', 'basketball', 'Court game with hoops', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:34:26.000Z'),
(4, 'Badminton', 'badminton', 'Racket sport played with shuttlecocks', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:36:03.000Z'),
(5, 'Padel', 'padel', 'Padel olahraga yang lagi viral', 1, '2025-10-14T04:34:22.000Z', '2025-10-22T08:55:45.000Z'),
(6, 'Tenis', 'tenis', 'Lapangan tenis', 0, '2025-11-16T14:57:14.000Z', '2025-11-16T14:57:14.000Z');

-- Reset sequence for sports
ALTER TABLE sports ALTER COLUMN id RESTART WITH 7;

-- Insert Fields Data
INSERT INTO fields (id, field_name, field_code, sport_id, price_per_hour, description, is_available, created_at, updated_at) VALUES
(1, 'Futsal Field A', 'futsal-a', 1, 150000.00, 'Futsal field for team A', 0, '2025-09-30T09:34:26.000Z', '2025-11-07T14:42:36.000Z'),
(2, 'Futsal Field B', 'futsal-b', 1, 160000.00, 'Futsal field for team B', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:34:26.000Z'),
(3, 'Futsal Field C (Premium)', 'futsal-c', 1, 180000.00, 'Premium futsal field', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:34:26.000Z'),
(4, 'Mini Soccer Field AA', 'minisoccer-aa', 2, 200000.00, 'Mini soccer field AA', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:34:26.000Z'),
(5, 'Mini Soccer Field BB', 'minisoccer-bb', 2, 220000.00, 'Mini soccer field BB', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:34:26.000Z'),
(6, 'Mini Soccer Field CC (Premium)', 'minisoccer-cc', 2, 250000.00, 'Premium mini soccer field', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:34:26.000Z'),
(7, 'Basketball Court 1', 'basketball-1', 3, 120000.00, 'Basketball court 1', 1, '2025-09-30T09:34:26.000Z', '2025-11-09T13:52:21.000Z'),
(8, 'Basketball Court 2', 'basketball-2', 3, 130000.00, 'Basketball court 2', 1, '2025-09-30T09:34:26.000Z', '2025-11-09T13:52:57.000Z'),
(9, 'Basketball Court 3 (Indoor)', 'basketball-3', 3, 150000.00, 'Premium indoor basketball court', 1, '2025-09-30T09:34:26.000Z', '2025-11-09T13:52:57.000Z'),
(10, 'Badminton Court 1', 'badminton-1', 4, 80000.00, 'Badminton court 1', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:34:26.000Z'),
(11, 'Badminton Court 2', 'badminton-2', 4, 85000.00, 'Badminton court 2', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:34:26.000Z'),
(12, 'Badminton Court 3 (Premium)', 'badminton-3', 4, 100000.00, 'Premium badminton court', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:34:26.000Z'),
(13, 'Badminton Court 4 (Premium)', 'badminton-4', 4, 100000.00, 'Premium badminton court 4', 1, '2025-09-30T09:34:26.000Z', '2025-09-30T09:34:26.000Z');

-- Reset sequence for fields
ALTER TABLE fields ALTER COLUMN id RESTART WITH 14;

-- Insert Bookings Data
INSERT INTO bookings (id, field_id, field_name, booking_date, time_slots, total_price, customer_name, customer_phone, customer_email, booking_status, payment_status, created_at, updated_at) VALUES
(1, 4, 'Mini Soccer Field AA', '2025-11-29', '["06:00", "07:00"]'::jsonb, 400000, 'BangJoe', '081122334455', null, 'pending', 'pending', '2025-11-23T16:10:48.639Z', '2025-11-23T16:10:48.639Z');

-- Reset sequence for bookings
ALTER TABLE bookings ALTER COLUMN id RESTART WITH 2;
